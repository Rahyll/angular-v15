<div class="ntx-select-container" 
     [class.disabled]="isDisabled"
     [class.open]="isOpen"
     [class.required]="required"
     [class.multiple]="multiple">
  
  <div class="ntx-select-trigger" 
       (click)="toggleDropdown()"
       (keydown)="onKeyDown($event)"
       tabindex="0"
       role="combobox"
       [attr.aria-expanded]="isOpen"
       [attr.aria-haspopup]="true"
       [attr.aria-label]="placeholder">
    
    <div class="ntx-select-value">
      <div class="ntx-select-placeholder" *ngIf="selectedOptions.length === 0">
        {{ placeholder }}
      </div>
      
      <div class="ntx-select-selected" *ngIf="selectedOptions.length > 0">
        <div class="ntx-select-single" *ngIf="!multiple">
          {{ getDisplayText() }}
        </div>
        
        <div class="ntx-select-multiple" *ngIf="multiple">
          <div class="ntx-select-chips" *ngIf="selectedOptions.length <= 2">
            <span class="ntx-select-chip" 
                  *ngFor="let option of selectedOptions"
                  (click)="removeOption($event, option)">
              {{ option.label }}
              <span class="ntx-select-chip-remove">Ã—</span>
            </span>
          </div>
          <div class="ntx-select-summary" *ngIf="selectedOptions.length > 2">
            {{ getDisplayText() }}
          </div>
        </div>
      </div>
    </div>
    
    <div class="ntx-select-arrow">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
  </div>
  
  <div class="ntx-select-dropdown" 
       *ngIf="isOpen"
       [class]="panelClass">
    
    <div class="ntx-select-options">
      <div class="ntx-select-option"
           *ngFor="let option of options; trackBy: trackByValue"
           [class.selected]="isOptionSelected(option)"
           [class.disabled]="option.disabled"
           (click)="selectOption(option)"
           role="option"
           [attr.aria-selected]="isOptionSelected(option)">
        
        <div class="ntx-select-option-content">
          <div class="ntx-select-option-checkbox" *ngIf="multiple">
            <div class="ntx-select-checkbox" [class.checked]="isOptionSelected(option)">
              <svg *ngIf="isOptionSelected(option)" width="12" height="12" viewBox="0 0 12 12" fill="none">
                <path d="M2 6L5 9L10 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          
          <div class="ntx-select-option-label">
            {{ option.label }}
          </div>
        </div>
      </div>
      
      <div class="ntx-select-no-options" *ngIf="options.length === 0">
        No options available
      </div>
    </div>
  </div>
  
  <div class="ntx-select-error" *ngIf="required && !value">
    This field is required
  </div>
</div> 